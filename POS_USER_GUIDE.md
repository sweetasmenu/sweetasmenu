# Smart Menu POS System - User Guide
# คู่มือการใช้งานระบบ POS

---

## สารบัญ (Table of Contents)

1. [ภาพรวมระบบ (System Overview)](#1-ภาพรวมระบบ-system-overview)
2. [การเข้าสู่ระบบ POS (POS Login)](#2-การเข้าสู่ระบบ-pos-pos-login)
3. [หน้าจอครัว (Kitchen Display)](#3-หน้าจอครัว-kitchen-display)
4. [หน้าจอพนักงาน (Staff Orders Display)](#4-หน้าจอพนักงาน-staff-orders-display)
5. [หน้าเมนูลูกค้า (Customer Menu)](#5-หน้าเมนูลูกค้า-customer-menu)
6. [การตั้งค่าพนักงาน (Staff Setup)](#6-การตั้งค่าพนักงาน-staff-setup)

---

## 1. ภาพรวมระบบ (System Overview)

Smart Menu POS เป็นระบบจัดการร้านอาหารที่ประกอบด้วย:

```
┌─────────────────────────────────────────────────────────────────┐
│                    Smart Menu POS System                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ลูกค้า (Customer)              ร้านอาหาร (Restaurant)         │
│   ┌───────────────┐              ┌───────────────┐              │
│   │  📱 สแกน QR   │──────────────│  👨‍🍳 ครัว     │              │
│   │  ดูเมนู       │   ส่งออเดอร์   │  (Kitchen)    │              │
│   │  สั่งอาหาร    │──────────────│               │              │
│   │  เรียกพนักงาน │              └───────────────┘              │
│   └───────────────┘                     │                       │
│          │                              │                       │
│          │                              ▼                       │
│          │                       ┌───────────────┐              │
│          └───────────────────────│  👨‍💼 พนักงาน  │              │
│              Service Request     │  (Staff)      │              │
│                                  └───────────────┘              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### URLs หลัก:

| หน้า | URL | คำอธิบาย |
|------|-----|----------|
| POS Login | `/pos/login` | หน้าเข้าสู่ระบบสำหรับพนักงาน/ครัว |
| Kitchen Display | `/pos/kitchen` | หน้าจอแสดงออเดอร์สำหรับครัว |
| Staff Orders | `/pos/orders` | หน้าจอจัดการออเดอร์สำหรับพนักงาน |
| Customer Menu | `/restaurant/{slug}` | หน้าเมนูสำหรับลูกค้า |
| Dashboard | `/dashboard` | หน้าจัดการร้านสำหรับเจ้าของ |

---

## 2. การเข้าสู่ระบบ POS (POS Login)

### URL: `/pos/login`

### ขั้นตอนการเข้าสู่ระบบ:

#### ขั้นตอนที่ 1: เลือกประเภทการใช้งาน
```
┌─────────────────────────────────────┐
│         Smart Menu POS              │
│                                     │
│   ┌─────────────┐ ┌─────────────┐   │
│   │  👨‍💼 พนักงาน │ │  👨‍🍳 ครัว   │   │
│   │   (Staff)   │ │  (Kitchen)  │   │
│   └─────────────┘ └─────────────┘   │
│                                     │
└─────────────────────────────────────┘
```
- **พนักงาน (Staff)**: สำหรับพนักงานเสิร์ฟ/แคชเชียร์
- **ครัว (Kitchen)**: สำหรับพ่อครัว/คนทำอาหาร

#### ขั้นตอนที่ 2: กรอกรหัสร้าน (Restaurant Slug)
```
┌─────────────────────────────────────┐
│   เลือกร้านอาหาร                     │
│                                     │
│   รหัสร้าน / Slug:                   │
│   ┌─────────────────────────────┐   │
│   │ thai-smile-auckland         │   │
│   └─────────────────────────────┘   │
│                                     │
│   [ถัดไป]                           │
└─────────────────────────────────────┘
```

**หมายเหตุ**: รหัสร้าน (Slug) สามารถดูได้จาก:
- หน้า Dashboard → Settings → Restaurant Slug
- URL หน้าเมนูลูกค้า เช่น `/restaurant/thai-smile-auckland`

#### ขั้นตอนที่ 3: กรอก PIN 6 หลัก
```
┌─────────────────────────────────────┐
│   ร้าน: Thai Smile Auckland         │
│   [เปลี่ยนร้าน]                      │
│                                     │
│   กรอก PIN 6 หลัก                    │
│                                     │
│   ● ● ● ○ ○ ○                       │
│                                     │
│   ┌───┐ ┌───┐ ┌───┐                 │
│   │ 1 │ │ 2 │ │ 3 │                 │
│   └───┘ └───┘ └───┘                 │
│   ┌───┐ ┌───┐ ┌───┐                 │
│   │ 4 │ │ 5 │ │ 6 │                 │
│   └───┘ └───┘ └───┘                 │
│   ┌───┐ ┌───┐ ┌───┐                 │
│   │ 7 │ │ 8 │ │ 9 │                 │
│   └───┘ └───┘ └───┘                 │
│   ┌───┐ ┌───┐ ┌───┐                 │
│   │ C │ │ 0 │ │ ⌫ │                 │
│   └───┘ └───┘ └───┘                 │
│                                     │
│   ┌─────────────────────────────┐   │
│   │    ✓ เข้าสู่ระบบ (Enter)     │   │
│   └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

**ปุ่มพิเศษ:**
| ปุ่ม | การทำงาน |
|------|----------|
| C | ล้าง PIN ทั้งหมด (Clear) |
| ⌫ | ลบตัวเลขหลังสุด (Backspace) |
| ✓ เข้าสู่ระบบ | กดเพื่อ Login หลังกรอก PIN ครบ 6 หลัก |

**หลังจากกรอก PIN ถูกต้อง:**
- พนักงาน (staff/waiter/cashier) → ไปหน้า `/pos/orders`
- ครัว (chef) → ไปหน้า `/pos/kitchen`

---

## 3. หน้าจอครัว (Kitchen Display)

### URL: `/pos/kitchen`

### คุณสมบัติหลัก:

#### 3.1 แสดงออเดอร์แบบ Real-time
```
┌─────────────────────────────────────────────────────────────────┐
│  🍳 Kitchen Display - Thai Smile         [พนักงาน: สมชาย]       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │ 🟡 รอทำ         │  │ 🟠 กำลังทำ      │  │ 🟢 เสร็จแล้ว    │  │
│  │ Pending (3)    │  │ Cooking (2)    │  │ Ready (1)      │  │
│  ├─────────────────┤  ├─────────────────┤  ├─────────────────┤  │
│  │ โต๊ะ 5         │  │ โต๊ะ 3         │  │ โต๊ะ 1         │  │
│  │ ผัดไทยกุ้ง x2   │  │ ต้มยำกุ้ง x1   │  │ ข้าวผัด x1     │  │
│  │ 🍖 หมู          │  │ ไม่เผ็ด        │  │                │  │
│  │ 📝 ไม่ใส่ถั่ว    │  │                │  │                │  │
│  │                │  │                │  │                │  │
│  │ [เริ่มทำ]       │  │ [เสร็จแล้ว]    │  │ [เสิร์ฟแล้ว]   │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.2 สถานะออเดอร์
| สถานะ | สี | คำอธิบาย |
|-------|-----|----------|
| 🟡 pending | เหลือง | ออเดอร์ใหม่ รอทำ |
| 🟠 cooking | ส้ม | กำลังทำอยู่ |
| 🟢 ready | เขียว | ทำเสร็จ รอเสิร์ฟ |
| ⬛ served | เทา | เสิร์ฟแล้ว |

#### 3.3 การแปลข้อความอัตโนมัติ
- ข้อความจากลูกค้า (notes) จะถูกแปลเป็นภาษาหลักของร้านโดยอัตโนมัติ
- เช่น ลูกค้าพิมพ์ "No peanuts please" → แปลเป็น "ไม่ใส่ถั่วลิสง"

#### 3.4 เสียงแจ้งเตือน
- 🔔 ออเดอร์ใหม่จะมีเสียงเตือน
- สามารถปิด/เปิดเสียงได้

---

## 4. หน้าจอพนักงาน (Staff Orders Display)

### URL: `/pos/orders`

### คุณสมบัติหลัก:

#### 4.1 จัดการออเดอร์
```
┌─────────────────────────────────────────────────────────────────┐
│  👨‍💼 Staff Panel - Thai Smile           [พนักงาน: สมหญิง]       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─── ออเดอร์ ───────────────────────────────────────────────┐  │
│  │                                                           │  │
│  │  🟡 โต๊ะ 5 - Dine-in                    15:30 น.          │  │
│  │  ├─ ผัดไทยกุ้ง x2 ($38.00)                               │  │
│  │  ├─ 🍖 หมู                                               │  │
│  │  └─ 📝 ไม่ใส่ถั่ว                                         │  │
│  │                                       รวม: $38.00         │  │
│  │  [ยืนยัน] [ยกเลิก]                                        │  │
│  │                                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌─── Service Requests ─────────────────────────────────────┐  │
│  │                                                           │  │
│  │  🔔 โต๊ะ 3 - เรียกพนักงาน                   15:25 น.      │  │
│  │  📝 "ขอช้อนส้อมเพิ่ม"                                     │  │
│  │  [ดำเนินการแล้ว]                                          │  │
│  │                                                           │  │
│  │  💧 โต๊ะ 7 - ขอน้ำเพิ่ม                     15:20 น.      │  │
│  │  [ดำเนินการแล้ว]                                          │  │
│  │                                                           │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

#### 4.2 ประเภท Service Requests
| ประเภท | ไอคอน | คำอธิบาย |
|--------|-------|----------|
| call_waiter | 🔔 | เรียกพนักงาน |
| request_sauce | 🍶 | ขอซอสเพิ่ม |
| request_water | 💧 | ขอน้ำเพิ่ม |
| request_bill | 🧾 | ขอเช็คบิล |
| other | ❓ | อื่นๆ |

#### 4.3 การจัดการออเดอร์
- **ยืนยัน (Confirm)**: ยืนยันออเดอร์ ส่งไปครัว
- **ยกเลิก (Cancel)**: ยกเลิกออเดอร์
- **อัปเดตสถานะ**: เปลี่ยนสถานะเป็น pending → cooking → ready → served

---

## 5. หน้าเมนูลูกค้า (Customer Menu)

### URL: `/restaurant/{restaurant-slug}`

### คุณสมบัติหลัก:

#### 5.1 ดูเมนู & สั่งอาหาร
```
┌─────────────────────────────────────────────────────────────────┐
│  🍜 Thai Smile Auckland                    🌐 [English ▼]       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  🔥 Popular This Week                                           │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐                           │
│  │ 🔥 HOT  │ │ 🔥 HOT  │ │ 🔥 HOT  │                           │
│  │ [รูป]  │ │ [รูป]  │ │ [รูป]  │                           │
│  │ผัดไทย   │ │ต้มยำกุ้ง │ │ส้มตำ    │                           │
│  │$18.00  │ │$22.00  │ │$15.00  │                           │
│  └─────────┘ └─────────┘ └─────────┘                           │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│  Main Dishes | Appetizers | Desserts | Drinks                   │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ [รูป]   ผัดไทย (Pad Thai)                    $18.00    │   │
│  │         ผัดไทยเส้นจันทน์กับกุ้งสด             [+ Add]   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ [รูป]   ต้มยำกุ้ง (Tom Yum Goong)             $22.00    │   │
│  │         ต้มยำน้ำข้นรสเด็ดกับกุ้งสด            [+ Add]   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  💬 [เรียกพนักงาน]                      🛒 Cart (2) - $40.00   │
└─────────────────────────────────────────────────────────────────┘
```

#### 5.2 เลือกภาษา (Translation)
- รองรับ 13+ ภาษา (Enterprise Plan)
- Free/Pro: Original + English
- การแปลจะถูก cache ไว้ใน Supabase เพื่อประหยัด API cost

#### 5.3 เรียกพนักงาน (Service Request)
กดปุ่ม 💬 เพื่อ:
- เรียกพนักงาน
- ขอซอสเพิ่ม
- ขอน้ำเพิ่ม
- ขอเช็คบิล
- อื่นๆ (พิมพ์ข้อความ)

#### 5.4 สั่งอาหาร
1. กดเมนูที่ต้องการ
2. เลือกเนื้อ (ถ้ามี)
3. เลือก Add-ons (ถ้าต้องการ)
4. ใส่หมายเหตุ (Optional)
5. Add to Cart
6. กรอกเลขโต๊ะ/ข้อมูล
7. Place Order

---

## 6. การตั้งค่าพนักงาน (Staff Setup)

### ขั้นตอนการเพิ่มพนักงาน:

1. เข้าหน้า **Dashboard** → **Settings**
2. เลื่อนไปที่ส่วน **Staff Management**
3. กด **Add Staff**
4. กรอกข้อมูล:
   - **Name**: ชื่อพนักงาน
   - **Role**: เลือก waiter / cashier / chef
   - **PIN**: กำหนด PIN 6 หลัก

```
┌─────────────────────────────────────────────────────────────────┐
│  Staff Management                                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 👨‍💼 สมชาย   │ Chef     │ PIN: ******  │ [Edit] [Delete] │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 👩‍💼 สมหญิง  │ Waiter   │ PIN: ******  │ [Edit] [Delete] │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 👨‍💼 สมศักดิ์ │ Cashier  │ PIN: ******  │ [Edit] [Delete] │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  [+ Add Staff]                                                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### Role ที่รองรับ:
| Role | เข้าหน้า | คำอธิบาย |
|------|----------|----------|
| chef | Kitchen Display | พ่อครัว/คนทำอาหาร |
| waiter | Staff Orders | พนักงานเสิร์ฟ |
| cashier | Staff Orders | แคชเชียร์ |
| manager | Staff Orders | ผู้จัดการ |

---

## Quick Start Checklist

### สำหรับร้านอาหารใหม่:

- [ ] 1. สมัครสมาชิกที่หน้า `/register`
- [ ] 2. สร้างร้านอาหารที่ Dashboard
- [ ] 3. อัปโหลดเมนูที่หน้า `/upload`
- [ ] 4. ตั้งค่า Restaurant Slug ที่ Settings
- [ ] 5. เพิ่มพนักงาน (Staff) ที่ Settings
- [ ] 6. สร้าง QR Code ที่หน้า `/qr`
- [ ] 7. ทดสอบระบบ:
   - เปิดหน้าเมนูลูกค้า `/restaurant/{slug}`
   - เปิดหน้าครัว `/pos/kitchen` (login ด้วย chef PIN)
   - เปิดหน้าพนักงาน `/pos/orders` (login ด้วย staff PIN)
   - ลองสั่งอาหารจากหน้าลูกค้า ดูว่าออเดอร์ขึ้นที่ครัวไหม

---

## Troubleshooting

### Q: ออเดอร์ไม่แสดงที่หน้าครัว?
A: ตรวจสอบว่า:
1. Login ด้วยร้านเดียวกัน (restaurant_id ตรงกัน)
2. Supabase Realtime เปิดใช้งานสำหรับ table `orders`

### Q: PIN ไม่ถูกต้อง?
A: ตรวจสอบ:
1. ไปที่ Dashboard → Settings → Staff Management
2. ตรวจสอบว่าพนักงานมี PIN กำหนดไว้ (แสดงเป็น "PIN: xxxxxx")
3. ตรวจสอบว่าใช้รหัสร้าน (Slug) ถูกต้อง
4. หาก PIN ยังไม่ถูกต้อง ให้ลอง Edit พนักงานและกำหนด PIN ใหม่

**หมายเหตุ:** PIN ต้องเป็นตัวเลข 6 หลัก เช่น 123456

### Q: เสียงแจ้งเตือนไม่ดัง?
A:
1. ตรวจสอบว่าเปิดเสียงในหน้า
2. บาง browser ต้องมี user interaction ก่อนถึงจะเล่นเสียงได้

---

**Smart Menu POS - Made for Thai Restaurants in New Zealand**
